<body style="background:#111; color:#0f0; font-family:monospace;">
  <pre id="log">[*] Waiting for Bridge...</pre>
  <script>
    function log(msg) {
      document.getElementById('log').textContent += '\n' + msg;
    }

    const interval = setInterval(() => {
      if (window.WebViewJavascriptBridge) {
        clearInterval(interval);
        log('[*] Bridge Detected!');

        const originalHandle = WebViewJavascriptBridge._handleMessageFromNative;
        WebViewJavascriptBridge._handleMessageFromNative = function(msg) {
          log('[+] _handleMessageFromNative called!');
          log('[+] Raw msg: ' + msg);
          try {
            const parsed = JSON.parse(msg);
            if (parsed.responseData && typeof parsed.responseData === 'string') {
              log('[+] responseData: ' + parsed.responseData);
              const tokenMatch = parsed.responseData.match(/"token" *: *"([^"]+)"/);
              if (tokenMatch) {
                log('[!] Token Found: ' + tokenMatch[1]);
              }
            }
          } catch (e) {
            log('[x] JSON parse error: ' + e);
          }
          return originalHandle.call(this, msg);
        };
      }
    }, 500);
  </script>
</body>
